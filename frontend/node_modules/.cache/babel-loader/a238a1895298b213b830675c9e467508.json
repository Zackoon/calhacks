{"ast":null,"code":"var _jsxFileName = \"/Users/nikhil/Desktop/dittyCal/src/components/Home.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport \"./Home.css\";\nimport React, { useState, useEffect, useRef } from \"react\";\nimport { motion, useMotionValue, useSpring, useTransform, useAnimation, AnimatePresence } from \"framer-motion\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nlet oldAudio = null;\nlet mostRecentDir = \"/data-start/2022\";\nconst getNextItems = direction => fetch(mostRecentDir).then(response => response.json()).then(json => json.Songs.map(song => {\n  // Caching hack\n  const img = document.createElement(\"img\");\n  img.src = song.Image;\n  // console.log(img.src)\n  return {\n    id: song.Image,\n    src: song.Image,\n    label: song.Name,\n    audio: song.Audio,\n    artist: song.Artist,\n    uri: song.Uri\n  };\n}));\nconst Card = _ref => {\n  _s();\n  let {\n    src,\n    isActive,\n    onRemove,\n    backgroundTransformer,\n    label,\n    audio,\n    artist,\n    uri\n  } = _ref;\n  const cardRef = useRef();\n  const controls = useAnimation();\n  const x = useMotionValue(0);\n  const rotate = useTransform(x, [-100, 0, 100], [-5, 0, 5]);\n  const THRESHOLD = 69;\n  if (oldAudio != null) {\n    oldAudio.pause();\n  }\n  ;\n  let currAudio = new Audio(audio);\n  currAudio.play();\n  oldAudio = currAudio;\n  if (isActive) {\n    controls.start({\n      scale: 1\n    });\n  }\n  useEffect(() => x.onChange(currentValue => {\n    if (Math.abs(currentValue) <= THRESHOLD) {\n      backgroundTransformer.set(currentValue);\n    }\n  }), [x, backgroundTransformer]);\n  const handleDragEnd = () => {\n    if (x.get() > 0) {\n      mostRecentDir = \"/data-right/\" + uri;\n    } else {\n      mostRecentDir = \"/data-left/\" + uri;\n    }\n    if (Math.abs(x.get()) > THRESHOLD) {\n      backgroundTransformer.set(0);\n      onRemove();\n    } else {\n      controls.start({\n        x: 0,\n        y: 0\n      });\n    }\n    console.log(mostRecentDir);\n  };\n  const backgroundImage = `url(${src})`;\n  return /*#__PURE__*/_jsxDEV(motion.div, {\n    ref: cardRef,\n    className: \"item\",\n    style: {\n      x,\n      rotate,\n      backgroundImage\n    },\n    drag: true\n    //   dragConstraints={{ left: 0, right: 0, top: 0, bottom: 0 }}\n    ,\n    onDragEnd: handleDragEnd,\n    initial: {\n      scale: 0.9\n    },\n    animate: controls\n    //animate={isActive ? { scale: 1 } : {}}\n    ,\n    custom: x,\n    exit: x => ({\n      x: x.get() * 10\n    }),\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      class: \"itemTitle\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [label, \" - By \", artist]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 84,\n    columnNumber: 5\n  }, this);\n};\n_s(Card, \"f5JZtD/21a9FP4M8q0nPN/qf61o=\", false, function () {\n  return [useAnimation, useMotionValue, useTransform];\n});\n_c = Card;\nexport default function Home() {\n  _s2();\n  const backgroundTransformer = useSpring(0, {\n    damping: 10000,\n    mass: 0.01\n  });\n  const background = useTransform(backgroundTransformer, [-50, 0, 50], [\"linear-gradient(90deg, rgba(255,145,145,1) 0%, rgba(255,145,145,0) 50%, rgba(15,15,15,0) 100%)\", \"linear-gradient(90deg, rgba(15,15,15,0) 0%, rgba(15,15,15,0) 50%, rgba(15,15,15,0) 100%)\", \"linear-gradient(90deg, rgba(15,15,15,0) 0%, rgba(126,255,99,0) 50%, rgba(126,255,99,1) 100%)\"]);\n  const [loading, setLoading] = useState(true);\n  const [items, setItems] = useState([]);\n  useEffect(() => {\n    if (items.length < 1) {\n      getNextItems(mostRecentDir).then(newItems => {\n        setItems([...items, ...newItems]);\n        if (loading) setLoading(false);\n      }).catch(err => console.error(err));\n    }\n  });\n  const handleRemoveItem = () => {\n    setItems(items.slice(1));\n  };\n  const displayItems = items.slice(0, 1);\n  const activeItem = displayItems[0];\n  displayItems.reverse(); // the first item should be rendered the last\n  return /*#__PURE__*/_jsxDEV(motion.div, {\n    className: \"App\",\n    style: {\n      background\n    },\n    children: [loading && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 19\n    }, this), !loading && /*#__PURE__*/_jsxDEV(AnimatePresence, {\n      children: displayItems.map(item => /*#__PURE__*/_jsxDEV(Card, {\n        src: item.src,\n        isActive: item === activeItem,\n        onRemove: handleRemoveItem,\n        backgroundTransformer: backgroundTransformer,\n        label: item.label,\n        audio: item.audio,\n        artist: item.artist,\n        uri: item.uri\n      }, item.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 142,\n    columnNumber: 5\n  }, this);\n}\n_s2(Home, \"bXmmwIbm/gd0EeGaaN/R27GqHNk=\", false, function () {\n  return [useSpring, useTransform];\n});\n_c2 = Home;\nvar _c, _c2;\n$RefreshReg$(_c, \"Card\");\n$RefreshReg$(_c2, \"Home\");","map":{"version":3,"names":["React","useState","useEffect","useRef","motion","useMotionValue","useSpring","useTransform","useAnimation","AnimatePresence","oldAudio","mostRecentDir","getNextItems","direction","fetch","then","response","json","Songs","map","song","img","document","createElement","src","Image","id","label","Name","audio","Audio","artist","Artist","uri","Uri","Card","isActive","onRemove","backgroundTransformer","cardRef","controls","x","rotate","THRESHOLD","pause","currAudio","play","start","scale","onChange","currentValue","Math","abs","set","handleDragEnd","get","y","console","log","backgroundImage","Home","damping","mass","background","loading","setLoading","items","setItems","length","newItems","catch","err","error","handleRemoveItem","slice","displayItems","activeItem","reverse","item"],"sources":["/Users/nikhil/Desktop/dittyCal/src/components/Home.js"],"sourcesContent":["import \"./Home.css\"; \nimport React, { useState, useEffect, useRef} from \"react\";\nimport {\n  motion,\n  useMotionValue,\n  useSpring,\n  useTransform,\n  useAnimation,\n  AnimatePresence\n} from \"framer-motion\";\n\nlet oldAudio = null;\nlet mostRecentDir = \"/data-start/2022\";\n\nconst getNextItems = (direction) =>\n  fetch(mostRecentDir)\n    .then(response => response.json())\n    .then(json => \n      json.Songs.map(song => {\n        // Caching hack\n        const img = document.createElement(\"img\");\n        img.src = song.Image;\n        // console.log(img.src)\n        return {\n          id: song.Image,\n          src: song.Image,\n          label: song.Name,\n          audio: song.Audio,\n          artist: song.Artist,\n          uri: song.Uri,\n        };\n      })\n    )\n\n\n\nconst Card = ({ src, isActive, onRemove, backgroundTransformer, label, audio, artist, uri }) => {\n  const cardRef = useRef();\n\n  const controls = useAnimation();\n\n  const x = useMotionValue(0);\n  const rotate = useTransform(x, [-100, 0, 100], [-5, 0, 5]);\n\n  const THRESHOLD = 69;\n\n  if (oldAudio != null){oldAudio.pause()};\n  let currAudio = new Audio(audio)\n  currAudio.play()\n  oldAudio = currAudio;\n\n  if (isActive) {\n    controls.start({ scale: 1 });\n  }\n\n  useEffect(\n    () =>\n      x.onChange(currentValue => {\n        if (Math.abs(currentValue) <= THRESHOLD) {\n          backgroundTransformer.set(currentValue);\n        }\n      }),\n    [x, backgroundTransformer]\n  );\n\n  const handleDragEnd = () => {\n    if (x.get()>0){\n        mostRecentDir = \"/data-right/\"+uri\n    } else {\n        mostRecentDir = \"/data-left/\"+uri\n    }\n    if (Math.abs(x.get()) > THRESHOLD) {\n      backgroundTransformer.set(0);\n      onRemove();\n    } else {\n      controls.start({ x: 0, y: 0 });\n    }\n    console.log(mostRecentDir);\n  };\n\n  const backgroundImage = `url(${src})`;\n\n  return (\n    <motion.div\n      ref={cardRef}\n      className=\"item\"\n      style={{ x, rotate, backgroundImage }}\n      drag={true}\n    //   dragConstraints={{ left: 0, right: 0, top: 0, bottom: 0 }}\n      onDragEnd={handleDragEnd}\n      initial={{ scale: 0.9 }}\n      animate={controls}\n      //animate={isActive ? { scale: 1 } : {}}\n      custom={x}\n      exit={x => ({ x: x.get() * 10 })}\n    >\n      <div class = \"itemTitle\"> \n        <p>{label} - By {artist}</p>\n      </div>\n    </motion.div>\n  );\n};\n\nexport default function Home() {\n  const backgroundTransformer = useSpring(0, {\n    damping: 10000,\n    mass: 0.01\n  });\n  const background = useTransform(\n    backgroundTransformer,\n    [-50, 0, 50],\n    [\n      \"linear-gradient(90deg, rgba(255,145,145,1) 0%, rgba(255,145,145,0) 50%, rgba(15,15,15,0) 100%)\",\n      \"linear-gradient(90deg, rgba(15,15,15,0) 0%, rgba(15,15,15,0) 50%, rgba(15,15,15,0) 100%)\",\n      \"linear-gradient(90deg, rgba(15,15,15,0) 0%, rgba(126,255,99,0) 50%, rgba(126,255,99,1) 100%)\"\n    ]\n  );\n\n  const [loading, setLoading] = useState(true);\n  const [items, setItems] = useState([]);\n\n  useEffect(() => {\n    if (items.length < 1) {\n        getNextItems(mostRecentDir)\n        .then(newItems => {\n          setItems([...items, ...newItems]);\n          if (loading) setLoading(false);\n        })\n        .catch(err => console.error(err));\n    }\n  });\n\n  const handleRemoveItem = () => {\n    setItems(items.slice(1));\n  };\n\n  const displayItems = items.slice(0, 1);\n  const activeItem = displayItems[0];\n\n  displayItems.reverse(); // the first item should be rendered the last\n  return (\n    <motion.div className=\"App\" style={{ background }}>\n      {loading && <div>Loading...</div>}\n      {!loading && (\n        <AnimatePresence>\n          {displayItems.map(item => (\n            <Card\n              key={item.id}\n              src={item.src}\n              isActive={item === activeItem}\n              onRemove={handleRemoveItem}\n              backgroundTransformer={backgroundTransformer}\n              label = {item.label}\n              audio = {item.audio}\n              artist = {item.artist}\n              uri = {item.uri}\n            />\n          ))}\n        </AnimatePresence>\n      )}\n    </motion.div>\n  );\n}"],"mappings":";;;AAAA,OAAO,YAAY;AACnB,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,MAAM,QAAO,OAAO;AACzD,SACEC,MAAM,EACNC,cAAc,EACdC,SAAS,EACTC,YAAY,EACZC,YAAY,EACZC,eAAe,QACV,eAAe;AAAC;AAEvB,IAAIC,QAAQ,GAAG,IAAI;AACnB,IAAIC,aAAa,GAAG,kBAAkB;AAEtC,MAAMC,YAAY,GAAIC,SAAS,IAC7BC,KAAK,CAACH,aAAa,CAAC,CACjBI,IAAI,CAACC,QAAQ,IAAIA,QAAQ,CAACC,IAAI,EAAE,CAAC,CACjCF,IAAI,CAACE,IAAI,IACRA,IAAI,CAACC,KAAK,CAACC,GAAG,CAACC,IAAI,IAAI;EACrB;EACA,MAAMC,GAAG,GAAGC,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC;EACzCF,GAAG,CAACG,GAAG,GAAGJ,IAAI,CAACK,KAAK;EACpB;EACA,OAAO;IACLC,EAAE,EAAEN,IAAI,CAACK,KAAK;IACdD,GAAG,EAAEJ,IAAI,CAACK,KAAK;IACfE,KAAK,EAAEP,IAAI,CAACQ,IAAI;IAChBC,KAAK,EAAET,IAAI,CAACU,KAAK;IACjBC,MAAM,EAAEX,IAAI,CAACY,MAAM;IACnBC,GAAG,EAAEb,IAAI,CAACc;EACZ,CAAC;AACH,CAAC,CAAC,CACH;AAIL,MAAMC,IAAI,GAAG,QAAmF;EAAA;EAAA,IAAlF;IAAEX,GAAG;IAAEY,QAAQ;IAAEC,QAAQ;IAAEC,qBAAqB;IAAEX,KAAK;IAAEE,KAAK;IAAEE,MAAM;IAAEE;EAAI,CAAC;EACzF,MAAMM,OAAO,GAAGpC,MAAM,EAAE;EAExB,MAAMqC,QAAQ,GAAGhC,YAAY,EAAE;EAE/B,MAAMiC,CAAC,GAAGpC,cAAc,CAAC,CAAC,CAAC;EAC3B,MAAMqC,MAAM,GAAGnC,YAAY,CAACkC,CAAC,EAAE,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;EAE1D,MAAME,SAAS,GAAG,EAAE;EAEpB,IAAIjC,QAAQ,IAAI,IAAI,EAAC;IAACA,QAAQ,CAACkC,KAAK,EAAE;EAAA;EAAC;EACvC,IAAIC,SAAS,GAAG,IAAIf,KAAK,CAACD,KAAK,CAAC;EAChCgB,SAAS,CAACC,IAAI,EAAE;EAChBpC,QAAQ,GAAGmC,SAAS;EAEpB,IAAIT,QAAQ,EAAE;IACZI,QAAQ,CAACO,KAAK,CAAC;MAAEC,KAAK,EAAE;IAAE,CAAC,CAAC;EAC9B;EAEA9C,SAAS,CACP,MACEuC,CAAC,CAACQ,QAAQ,CAACC,YAAY,IAAI;IACzB,IAAIC,IAAI,CAACC,GAAG,CAACF,YAAY,CAAC,IAAIP,SAAS,EAAE;MACvCL,qBAAqB,CAACe,GAAG,CAACH,YAAY,CAAC;IACzC;EACF,CAAC,CAAC,EACJ,CAACT,CAAC,EAAEH,qBAAqB,CAAC,CAC3B;EAED,MAAMgB,aAAa,GAAG,MAAM;IAC1B,IAAIb,CAAC,CAACc,GAAG,EAAE,GAAC,CAAC,EAAC;MACV5C,aAAa,GAAG,cAAc,GAACsB,GAAG;IACtC,CAAC,MAAM;MACHtB,aAAa,GAAG,aAAa,GAACsB,GAAG;IACrC;IACA,IAAIkB,IAAI,CAACC,GAAG,CAACX,CAAC,CAACc,GAAG,EAAE,CAAC,GAAGZ,SAAS,EAAE;MACjCL,qBAAqB,CAACe,GAAG,CAAC,CAAC,CAAC;MAC5BhB,QAAQ,EAAE;IACZ,CAAC,MAAM;MACLG,QAAQ,CAACO,KAAK,CAAC;QAAEN,CAAC,EAAE,CAAC;QAAEe,CAAC,EAAE;MAAE,CAAC,CAAC;IAChC;IACAC,OAAO,CAACC,GAAG,CAAC/C,aAAa,CAAC;EAC5B,CAAC;EAED,MAAMgD,eAAe,GAAI,OAAMnC,GAAI,GAAE;EAErC,oBACE,QAAC,MAAM,CAAC,GAAG;IACT,GAAG,EAAEe,OAAQ;IACb,SAAS,EAAC,MAAM;IAChB,KAAK,EAAE;MAAEE,CAAC;MAAEC,MAAM;MAAEiB;IAAgB,CAAE;IACtC,IAAI,EAAE;IACR;IAAA;IACE,SAAS,EAAEL,aAAc;IACzB,OAAO,EAAE;MAAEN,KAAK,EAAE;IAAI,CAAE;IACxB,OAAO,EAAER;IACT;IAAA;IACA,MAAM,EAAEC,CAAE;IACV,IAAI,EAAEA,CAAC,KAAK;MAAEA,CAAC,EAAEA,CAAC,CAACc,GAAG,EAAE,GAAG;IAAG,CAAC,CAAE;IAAA,uBAEjC;MAAK,KAAK,EAAG,WAAW;MAAA,uBACtB;QAAA,WAAI5B,KAAK,YAAQI,MAAM;MAAA;QAAA;QAAA;QAAA;MAAA;IAAK;MAAA;MAAA;MAAA;IAAA;EACxB;IAAA;IAAA;IAAA;EAAA,QACK;AAEjB,CAAC;AAAC,GAjEII,IAAI;EAAA,QAGS3B,YAAY,EAEnBH,cAAc,EACTE,YAAY;AAAA;AAAA,KANvB4B,IAAI;AAmEV,eAAe,SAASyB,IAAI,GAAG;EAAA;EAC7B,MAAMtB,qBAAqB,GAAGhC,SAAS,CAAC,CAAC,EAAE;IACzCuD,OAAO,EAAE,KAAK;IACdC,IAAI,EAAE;EACR,CAAC,CAAC;EACF,MAAMC,UAAU,GAAGxD,YAAY,CAC7B+B,qBAAqB,EACrB,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,EAAE,CAAC,EACZ,CACE,gGAAgG,EAChG,0FAA0F,EAC1F,8FAA8F,CAC/F,CACF;EAED,MAAM,CAAC0B,OAAO,EAAEC,UAAU,CAAC,GAAGhE,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAACiE,KAAK,EAAEC,QAAQ,CAAC,GAAGlE,QAAQ,CAAC,EAAE,CAAC;EAEtCC,SAAS,CAAC,MAAM;IACd,IAAIgE,KAAK,CAACE,MAAM,GAAG,CAAC,EAAE;MAClBxD,YAAY,CAACD,aAAa,CAAC,CAC1BI,IAAI,CAACsD,QAAQ,IAAI;QAChBF,QAAQ,CAAC,CAAC,GAAGD,KAAK,EAAE,GAAGG,QAAQ,CAAC,CAAC;QACjC,IAAIL,OAAO,EAAEC,UAAU,CAAC,KAAK,CAAC;MAChC,CAAC,CAAC,CACDK,KAAK,CAACC,GAAG,IAAId,OAAO,CAACe,KAAK,CAACD,GAAG,CAAC,CAAC;IACrC;EACF,CAAC,CAAC;EAEF,MAAME,gBAAgB,GAAG,MAAM;IAC7BN,QAAQ,CAACD,KAAK,CAACQ,KAAK,CAAC,CAAC,CAAC,CAAC;EAC1B,CAAC;EAED,MAAMC,YAAY,GAAGT,KAAK,CAACQ,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;EACtC,MAAME,UAAU,GAAGD,YAAY,CAAC,CAAC,CAAC;EAElCA,YAAY,CAACE,OAAO,EAAE,CAAC,CAAC;EACxB,oBACE,QAAC,MAAM,CAAC,GAAG;IAAC,SAAS,EAAC,KAAK;IAAC,KAAK,EAAE;MAAEd;IAAW,CAAE;IAAA,WAC/CC,OAAO,iBAAI;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QAAqB,EAChC,CAACA,OAAO,iBACP,QAAC,eAAe;MAAA,UACbW,YAAY,CAACxD,GAAG,CAAC2D,IAAI,iBACpB,QAAC,IAAI;QAEH,GAAG,EAAEA,IAAI,CAACtD,GAAI;QACd,QAAQ,EAAEsD,IAAI,KAAKF,UAAW;QAC9B,QAAQ,EAAEH,gBAAiB;QAC3B,qBAAqB,EAAEnC,qBAAsB;QAC7C,KAAK,EAAIwC,IAAI,CAACnD,KAAM;QACpB,KAAK,EAAImD,IAAI,CAACjD,KAAM;QACpB,MAAM,EAAIiD,IAAI,CAAC/C,MAAO;QACtB,GAAG,EAAI+C,IAAI,CAAC7C;MAAI,GARX6C,IAAI,CAACpD,EAAE;QAAA;QAAA;QAAA;MAAA,QAUf;IAAC;MAAA;MAAA;MAAA;IAAA,QAEL;EAAA;IAAA;IAAA;IAAA;EAAA,QACU;AAEjB;AAAC,IA3DuBkC,IAAI;EAAA,QACItD,SAAS,EAIpBC,YAAY;AAAA;AAAA,MALTqD,IAAI;AAAA;AAAA;AAAA"},"metadata":{},"sourceType":"module"}